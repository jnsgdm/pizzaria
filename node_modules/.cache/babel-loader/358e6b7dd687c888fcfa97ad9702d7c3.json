{"ast":null,"code":"export default {\n  name: \"PizzaGrid\",\n\n  data() {\n    return {\n      orders: null,\n      status: []\n    };\n  },\n\n  methods: {\n    async getOrders() {\n      const req = await fetch(\"http://localhost:3000/orders\");\n      const res = await req.json();\n      this.orders = res;\n      console.log(this.orders);\n    },\n\n    async getStatus() {\n      const req = await fetch(\"http://localhost:3000/status\");\n      const res = await req.json();\n      this.status = res;\n      console.log(this.status);\n    },\n\n    async deleteOrder(orderId) {\n      //especifico do json server\n      const req = await fetch(`http://localhost:3000/orders/${orderId}`, {\n        method: \"DELETE\"\n      });\n      const res = await req.json(); //refresh page\n\n      this.getOrders();\n    },\n\n    async updateOrder(event, orderId) {\n      const selectedStatus = event.target.value;\n      const resJson = JSON.stringify({\n        status: selectedStatus\n      });\n      const req = await fetch(`http://localhost:3000/orders/${orderId}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: resJson\n      });\n      const res = await req.json();\n    }\n\n  },\n\n  mounted() {\n    this.getOrders(); //status\n\n    this.getStatus();\n  }\n\n};","map":{"version":3,"mappings":"AACA,eAAe;EACXA,IAAI,EAAE,WADK;;EAEXC,IAAI,GAAE;IACF,OAAM;MACFC,MAAM,EAAE,IADN;MAEFC,MAAM,EAAE;IAFN,CAAN;EAIH,CAPU;;EAQXC,OAAO,EAAC;IACJ,MAAMC,SAAN,GAAiB;MACb,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,8BAAD,CAAvB;MACA,MAAMC,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB;MAEA,KAAKP,MAAL,GAAcM,GAAd;MACAE,OAAO,CAACC,GAAR,CAAY,KAAKT,MAAjB;IAEH,CARG;;IASJ,MAAMU,SAAN,GAAiB;MACb,MAAMN,GAAG,GAAG,MAAMC,KAAK,CAAC,8BAAD,CAAvB;MACA,MAAMC,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB;MAEA,KAAKN,MAAL,GAAcK,GAAd;MACAE,OAAO,CAACC,GAAR,CAAY,KAAKR,MAAjB;IAEH,CAhBG;;IAiBJ,MAAMU,WAAN,CAAkBC,OAAlB,EAA0B;MACtB;MACA,MAAMR,GAAG,GAAG,MAAMC,KAAK,CAAE,gCAA+BO,OAAQ,EAAzC,EAA2C;QAC9DC,MAAM,EAAE;MADsD,CAA3C,CAAvB;MAIA,MAAMP,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB,CANsB,CAOtB;;MACA,KAAKJ,SAAL;IAEH,CA3BG;;IA4BJ,MAAMW,WAAN,CAAkBC,KAAlB,EAAwBH,OAAxB,EAAgC;MAC5B,MAAMI,cAAc,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAApC;MAEA,MAAMC,OAAO,GAAGC,IAAI,CAACC,SAAL,CAAe;QAACpB,MAAM,EAAEe;MAAT,CAAf,CAAhB;MAEA,MAAMZ,GAAG,GAAG,MAAMC,KAAK,CAAE,gCAA+BO,OAAQ,EAAzC,EAA2C;QAC9DC,MAAM,EAAE,OADsD;QAE9DS,OAAO,EAAE;UAAC,gBAAgB;QAAjB,CAFqD;QAG9DC,IAAI,EAAEJ;MAHwD,CAA3C,CAAvB;MAMA,MAAMb,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB;IACH;;EAxCG,CARG;;EAkDXiB,OAAO,GAAE;IACL,KAAKrB,SAAL,GADK,CAEL;;IACA,KAAKO,SAAL;EACH;;AAtDU,CAAf","names":["name","data","orders","status","methods","getOrders","req","fetch","res","json","console","log","getStatus","deleteOrder","orderId","method","updateOrder","event","selectedStatus","target","value","resJson","JSON","stringify","headers","body","mounted"],"sourceRoot":"","sources":["/home/jns/workspace/pizzaria/src/components/PizzaGrid.vue"],"sourcesContent":["<template>\n    <div id=\"pizza-table\">\n        <h1>Pedidos:</h1>\n      <div>\n          <div id=\"table-head\">\n              <div class=\"orderId\">NÂ°</div>\n              <div>Cliente</div>\n              <div>Pizza</div>\n              <div>Borda</div>\n              <div class=\"acoes\">Status</div>\n          </div>\n      </div>\n      <div id=\"table-rows\" >\n        <div class=\"row\" v-for=\"order in orders\" :key=\"order.id\" >\n            <div class=\"orderId\" >{{order.id}}</div>\n                <div>{{order.nome}}</div>\n                <div>{{order.sabor}}</div>\n                <div>{{order.borda}}</div>\n                <div class=\"acoes\">\n                    <select name=\"status\" id=\"status\" @change=\"updateOrder($event,order.id)\">\n                        <option v-for=\"st in status\" :key=\"st.id\" :value=\"st.tipo\" :selected=\"order.status == st.tipo\">\n                            {{st.tipo}}\n                        </option>\n                    </select>\n                    <button class=\"delete-btn\" @click=\"deleteOrder(order.id)\">Cancelar</button>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"PizzaGrid\",\n    data(){\n        return{\n            orders: null,\n            status: []\n        }\n    },\n    methods:{\n        async getOrders(){\n            const req = await fetch(\"http://localhost:3000/orders\");\n            const res = await req.json();\n  \n            this.orders = res\n            console.log(this.orders);\n\n        },\n        async getStatus(){\n            const req = await fetch(\"http://localhost:3000/status\");\n            const res = await req.json();\n\n            this.status = res\n            console.log(this.status);\n\n        },\n        async deleteOrder(orderId){\n            //especifico do json server\n            const req = await fetch(`http://localhost:3000/orders/${orderId}`,{\n                method: \"DELETE\"\n            });\n\n            const res = await req.json();\n            //refresh page\n            this.getOrders();\n\n        },\n        async updateOrder(event,orderId){\n            const selectedStatus = event.target.value;\n\n            const resJson = JSON.stringify({status: selectedStatus});\n\n            const req = await fetch(`http://localhost:3000/orders/${orderId}`,{\n                method: \"PATCH\",\n                headers: {\"Content-Type\": \"application/json\"},\n                body: resJson\n            });\n\n            const res = await req.json();\n        }\n    },\n    mounted(){\n        this.getOrders();\n        //status\n        this.getStatus();\n    }\n        \n}\n</script>\n\n<style scoped>\n\n    #pizza-table{\n        max-width: 1100px;\n        margin: 0 auto;\n    }\n    #table-head,\n    #table-rows,\n    .row{\n        display: flex;\n        flex-wrap: wrap;\n    }\n    #table-head{\n        font-weight: bold;\n        padding: 12px;\n        border-bottom: 3px solid tomato; \n    }\n    #table-head div,\n    .row div{\n        width: 20%;\n    }\n    .row{\n        width: 100%;\n        padding: 12px;\n        border: 1px solid #2222\n    }\n    #table-head .orderId,\n    .row .orderId{\n        width: 5%;\n    }\n    select{\n        padding: 4px;\n        margin-right: 12px;\n        width: 55%;\n    }\n    .delete-btn{\n        background-color: tomato;\n        color: azure;\n        font-weight: bold;\n        border: 2px solid tomato;\n        padding: 10px;\n        margin: 0 auto;\n        cursor: pointer;\n        transition: .5s;\n    }\n    .delete-btn:hover{\n        background: azure;\n        color: #222;\n    }\n    #table-head .acoes,\n    .row .acoes{\n        margin-left: 100px;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}